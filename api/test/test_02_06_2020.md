# Тестирование API  27.05.2020
# Ссылки на каждый блок<a name="Ссылки"></a>
1. [Registration](#Registration)
2. [Authorization](#Authorization)
3. [Logout](#Logout)
4. [Result](#Result)


# Registration <a name="Registration"></a>
[<-- Вернуться к списку](#Ссылки)
### Предусловия группы тестов

request method = POST  
route = http://host1813162.hostland.pro/api/register  
Headers:  
```
     Accept : application/json   
```


## Тест 1
Регистрация с валидными данными  
Успешно. Но в конце файла стоит запятая (в документации), а сервер присылает ответ без запятой. Хоть ответ сервера не совпадает с
документацией, но он является правильным по правилам формирования json. 
* Предусловия:
Body: x-www-from-urlencoded
```
{
    "email": "name1",
    "name": "Ivan",
    "surname": "Ivanov",
    "password": "123456",
    "password_confirmation": "123456",
}
```
* Шаги:  
1) Отправить API запрос на сервер  

* Ожидаемый результат:  
json
```
{
    "has_errors": false,
    "errors": [],
    "message": "Регистрация прошла успешно. Вы были перенаправлены на страницу авторизации.",
}
```
* Фактический результат:  
json 
```
{
    "has_errors": false,
    "errors": [],
    "message": "Регистрация прошла успешно. Вы были перенаправлены на страницу авторизации."
}
```

## Тест 2
Невозможность регистрации если пароль не совпадает с паролем подтверждения    
ПРОВАЛ. Регистрация всё равно проходит.
* Предусловия:
Body: x-www-from-urlencoded
```
{
    "email": "name2",
    "name": "Ivan",
    "surname": "Ivanov",
    "password": "123",
    "password_confirmation": "1234",
}
```
* Шаги:  
1) Отправить API запрос на сервер  

* Ожидаемый результат:  
В регистрации должно быть отказано.
json
```
{
    "has_errors": true,
    "message": "Указанные данные введены неверно.",
    "errors": {
        "password": [
            "Поле пароль не совпадает с полем подтверждения."
        ]
    }
}
```
* Фактический результат:  
json 
```
{
    "has_errors": false,
    "errors": [],
    "message": "Регистрация прошла успешно. Вы были перенаправлены на страницу авторизации."
}
```

## Тест 3
Невозможность регистрации с повторяющимся Email  
ПРОВАЛ. Форма json файла неверна
* Предусловия:
Body: x-www-from-urlencoded
```
{
    "email": "name1",
    "name": "Ivan",
    "surname": "Ivanov",
    "password": "123",
    "password_confirmation": "123",
}
```
* Шаги:  
1) Отправить API запрос на сервер 
2) Если записи на сервере нет, то ещё раз послать API запрос

* Ожидаемый результат:  
В регистрации должно быть отказано.  
json
```
{
    "has_errors": true,
    "message": "Указанные данные введены неверно.",
    "errors": {
        "email": [
            "Пользователь с таким email уже зарегистрирован."
        ]
    }
}
```
* Фактический результат:  
json 
```
{
    "message": "Указанные данные введены неверно.",
    "errors": {
        "email": [
            "Пользователь с таким email уже зарегистрирован."
        ]
    }
}
```

# Authorization <a name="Authorization"></a>
[<-- Вернуться к списку](#Ссылки)
### Предусловия группы тестов

request method = POST  
route = http://host1813162.hostland.pro/api/login  
Headers:  
```
     Accept : application/json   
```

## Тест 1
Авторизация с валидными данными  
Успешно. Но порядок нарушен (возможно критично), сервер передаёт данные не описанные в документах. 
* Предусловия:
Body: x-www-from-urlencoded
```
{
    "email": "name1",
    "password": "123456"
}
```
* Шаги:  
1) Отправить API запрос на сервер  

* Ожидаемый результат:  
json
```
{
    "has_errors": false,
    "errors": [],
    "token": "access_token_here",
    "user": {
        "id": 15,
        "email": "name1",
        "name": "Ivan",
        "surname": "Ivanov",
    }
}
```
* Фактический результат:  
json 
```
{
    "has_errors": false,
    "errors": [],
    "user": {
        "id": 15,
        "name": "Ivan",
        "surname": "Ivanov",
        "email": "name1",
        "created_at": "2020-06-02T00:14:15.000000Z",
        "updated_at": "2020-06-02T00:14:15.000000Z"
    },
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiMDc3ZmRmYzdmMzQ0MjJlYTkyZmIwM2ZiOGI0YjMzMzQ3MmMwMTA0MTI2YjE
    zNDMzNjcxYjY2M2E5MjcyNzExMDlmNjRiMGE1N2E1YmRhYmUiLCJpYXQiOjE1OTEwNTc3MjgsIm5iZiI6MTU5MTA1NzcyOCwiZXhwIjoxNjIyNTkzNzI4LCJzdWIiOiIxN
    SIsInNjb3BlcyI6W119.GsMb_6jUsqLZ9a890BtLdROcRC5wQfsUTSaNhcdkT_irtBfkg31Kc8izc6rgNO1YPIFSRLeconSL_Z2zU6SHWGNUzvjvJE0ZmMEiRUxUu_hg2V
    ja_JBf4ZHF00EDF46o46E2sJ6Sv8_ZHmeFqH_ubuy9IUcU5pVvkVheZ-OZ2xrYrgcnIpXBh4ToR-ZafkdazzCANydrNnvOecyv00LIgeJ-_RWPZcgqH-9we0CasAwNJVR0
    r4chpNP8dQ6Y-XXxfDMeZ2QxcYhGV1YLygQk6MjPtudoFJNoxpWyIwr86pJ_9UgI1msqcMFNN7tHvt37U7YJYgxxBZN89hpbhk-HDj8IIgTkrkkgkSLDpuQh00cv8WPr3i
    Xkzcr02qsRxgMOTLuVxzONBSYD-rC1TmVcK8ZD7PrQApr_Ss6y61iIUXhYptSscKRL4iEFgTzx0iwOdzmvbvVHtv93-bqeo5e2bZFpNJcCjRBFIEV0lnGXmCos-ValHRS0
    IQXY3ra74lscIvnhlYUNGDwSejtLlCgRUH1EfFWnHesSne-gjPDGRxNgUozyRorCTTQXQSk-o50o5oj_gtfwvVed8R92dmFOfcIf3VJgPQIvNYtjxftp564Q_OVOX0DP4O
    mL-9rKpOpJvA6kTToIqSHJ_N5-GMYG9PzoSrT4YJd498GO8Crew84"
}
```

## Тест 2
Авторизация с невалидными данными  
Успешно.
* Предусловия:
Body: x-www-from-urlencoded
```
{
    "email": "name1",
    "password": "1234567"
}
```
* Шаги:  
1) Отправить API запрос на сервер  

* Ожидаемый результат:  
json
```
{
    "has_errors": true,
    "message": "Не удаётся войти. Неверный логин или пароль.",
    "token": "null",
    "user": "null"
}
```
* Фактический результат:  
json 
```
{
    "has_errors": true,
    "message": "Не удаётся войти. Неверный логин или пароль.",
    "token": "null",
    "user": "null"
}
```
# Logout <a name="Logout"></a>
[<-- Вернуться к списку](#Ссылки)
# Result <a name="Result"></a>
[<-- Вернуться к списку](#Ссылки)

