# Test 20.05.2020

## Registration
### Предусловия группы тестов
```
request method = POST
route = http://host1813162.hostland.pro/api/register

Headers:  
    Key: Accept  
    Value: application/json   

Body:     
json
{
    "email": "{{email}}",
    "name": "{{name}}",
    "middle_name": "{{name}}",
    "password": "{{password}}",
    "password_confirmation": "{{password}}"
    "is_admin": "false"
}
```
Непонятная работа параметра **is_admin**, возможно этот параметр пока не обрабатывается (ибо можно зарегистрирваться как админ,
но в ответ не прилетает какой-то иной ответ, кроме успешной регистрации. Также, регистрация сначала как админа, потом как 
обычного пользователя обрабатывается также, как и повторня регистрация с уже внесенным в базу email)
### Тесты

#### Регистрация проходит успешно, если все параметры заданы корректно и по условию из документации
```
Headers:  
    Key: Accept  
    Value: application/json   

Body:     
json
{
    "email": "hello@gmail.com",
    "name": "name",
    "middle_name": "name",
    "password": "1234567",
    "password_confirmation": "1234567"
}
```
#### Ответ
**Status: 200 OK**
```
{
    "has_errors": false,
    "errors": "[]",
    "message": "Письмо для активации почты отправлено на ваш email адрес"
}

```

#### Если польователь пытается зарегистироваться повторно с тем же email, то ему не приходит сообщение об ошибке, прописанное в документации API. 
#### Ожидание
```
{
    "has_errors": true,
    "errors": [
        {
            "type": "EmailError",
            "message": "Пользователь с таким адресом электронной почты уже зарегистрирован"
        }
    ]
}
```
#### Реальность

```
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Laravel</title>

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet">

	<!-- Styles -->
	<style> ....
  ....
 ``` 
Поэтому нельзя проследить, прошла ли повторная регистрация с такими же параметрами. 



## Authorization

Авторизация зарегистрированных пользователей проходит успешно, но возвращается ответ, **отличающийся от документации**

```
Headers:  
    Key: Accept  
    Value: application/json   

Body:     
json
{
    "email": "hello@gmail.com",
    "password": "1234567"
}
```

#### Ответ
##### Ожидание

```
{
    "has_errors": false,
    "errors": [],
    "token": "access_token_here",
    "user": {
        "id": 67,
        "email": "example@mail.com",
        "name": "Ivan",
        "middle_name": "Ivanovich",
        "is_admin": false
    }
}


```
##### Реальность

```
{
    "user": {
        "id": 16,
        "name": "name",
        "email": "hello@gmail.com",
        "email_verified_at": null,
        "created_at": "2020-05-21T06:02:16.000000Z",
        "updated_at": "2020-05-21T06:02:16.000000Z"
    },
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiNWYwOGE4ZGZmN2Q1ZDA5ZWY2NzE2YzUxZmViMWNlODU0MDkzNjVjMDY3NjViOTNkNzliODBhZGE1NDQxZGMwMzViMDkzNzNiYmY3ZWEzZjgiLCJpYXQiOjE1OTAwNDEzMzcsIm5iZiI6MTU5MDA0MTMzNywiZXhwIjoxNjIxNTc3MzM3LCJzdWIiOiIxNiIsInNjb3BlcyI6W119.wIZlCKOeeq2rVk3ZAvmhkSwVIAc3xyVpCowhcz1ALdmwLnkr6TcHZMHd1pOx2bhtgZn6YO5rNV9QpRlI1H8-ULhAHaXfXLC1lDxQE_Exf3vz-fC8O5VYQA3w1jj940RDsxNs8MYnYErjIZ6Maf9kjUu5ArBHHcuBJyFNRCGj7K1Ith_ADTDZ0QH0_75PXfrDoSirT7NZY0AZNMs7dxcmxHpt5VFBHGPOdUzAV0KY8_OZAW6PXjCLd6H3CEX2FDpTDicWEUGFdAAoEjSQkXswuo1XFknqK-W0_A2EJ5pmauFjrWidJNuEQ1wP-xFnP_waAUfgz_kHLMyEEIeGK_WbraBqwLuztnb5BJlJeivuQ-CQm0D6LsV5ibpNF4Bi1aChGMHEktCpbypNAHy8Pi3HVPRFvLr06dzd_4-LMfYa1M-NH6wbSJeAKdyn6QlA-JnwrqeGw-eGBupR4YMGxMayOw_-aSGsrm29ucHK2BRErIJDUwL5hSrQPM_hyEjXHpncCtxYGtT2iMigp3HSK-5bQkoML0JqGlolljGe5XRzzDKDfE3OXQrW8VrUNs2Ww99W6PJBTQRqsL6N9kOW4vCR5oe_uqbbjHPx_fnxabqIUz-6gruIDFfUA1F0ZgYfW9Ekzip9WqnnF6-9he8EObfGdAYQmerlKk6eKaNLfrRWdxc"
}


```
