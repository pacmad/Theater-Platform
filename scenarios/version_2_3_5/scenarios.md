# Сценарии (версия 2.3.5)

## Изменения

### Блок "Театры". раздел контакты
+ добавлены карты

### Блок "Расписание" 
+ удалена страница преддоплаты


## Блок "Регистрация и авторизация" 
### Регистрация пользователя в системе

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на главной странице|Предусловие: Открыта главная страница |  
|1. Пользователь нажимает на кнопку личного кабинета в правом верхнем углу. и попадает на страницу авторизации, где выбивает "Зарегистрироваться"|1. Система открывает страницу авторизации, затем страницу регистрации|
|*1.1 Если пользователь уже зарегистрирован, то он выбирает опцию Авторизации и переходит к сценарию “Авторизация пользователя”*| *1.1 Если пользователь уже зарегистрирован, то он выбирает опцию Авторизации и переходит к сценарию “Авторизация пользователя”*| 
|2. Пользователь заполняет поля: фамилия, имя, email, пароль, подтверждение пароля, нажимает чек-бокс для согласия с правилами сайта и обработки данных, нажимает кнопку “Создать аккаунт”| 2. Система позволяет пользователю создать аккаунт. Система получает данные: фамилия, имя, email, пароль, подтверждение пароля.|
|*2.1 Если поле "Имя" не соответствует требованиям, то под полем пользователь видит ошибки: "Имя должно состоять минимум из 2 букв", "Имя должно состоять максимум из 127 букв","Имя может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|*2.1 Если поле "Имя" не соответствует требованиям, то система выдает ошибки: "Имя должно состоять минимум из 2 букв", "Имя должно состоять максимум из 127 букв", "Имя может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|
|*2.2 Если поле "Фамилия" не соответствует требованиям, то под полем пользователь видит ошибки: "Фамилия должна состоять минимум из 2 букв", "Фамилия должна состоять максимум из 127 букв","Фамилия может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|*2.1 Если поле "Фамилия" не соответствует требованиям, то система выдает ошибки: "Фамилия должна состоять минимум из 2 букв", "Фамилия должна состоять максимум из 127 букв", "Фамилия может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|
|*2.3 Если поле "Email" не соответствует требованиям, то под полем пользователь видит ошибки: "Неверный формат email адреса", "Email может содержать только символы латинского алфавита, цифры и символ @ и точки (не более одной подряд)." "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|*2.3 Если поле "Email" не соответствует требованиям, то система выдает ошибки: "Неверный формат email адреса", "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|
|*2.4 Если поле "Пароль" не соответствуют требованиям, то под полем пользователь видит ошибки: "Пароль должен состоять минимум из 8 символов", "Длина пароля не должна превышать 127 символов", "Пароль может содержать только буквы латинского алфавита, цифры и специальные символы: !@#$%^&* ", "Пароль должен содержать минимум одну букву в верхнем регистре", "Пароль должен содержать минимум одну букву в нижнем регистре", "Пароль должен содержать минимум одну цифру", "Данное поле необходимо заполнить".* |*2.4 Если поле "Пароль" не соответствуют требованиям, то система под полем выдает ошибки: "Пароль должен состоять минимум из 8 символов", "Длина пароля не должна превышать 127 символов", "Пароль может содержать только буквы латинского алфавита, цифры и специальные символы: !@#$%^&* ", "Пароль должен содержать минимум одну букву в верхнем регистре", "Пароль должен содержать минимум одну букву в нижнем регистре", "Пароль должен содержать минимум одну цифру", "Данное поле необходимо заполнить".* |
|*2.5 Если поле "Повторите пароль" не заполнено, то под полем пользователь видит ошибку: "Данное поле необходимо заполнить".*|*2.5 Если поле "Повторите пароль" не заполнено, то под полем система выводит ошибку: "Данное поле необходимо заполнить".*|
|*2.6 Если поле "Пароль" и "Повторите пароль" не совпадают, то под полем "Повторите пароль" пользователь видит ошибки: "Введенные пароли не совпадают".*|*2.6 Если поле "Пароль" и "Повторите пароль" не совпадают, то под полем "Повторите пароль" система выводит ошибки: "Введенные пароли не совпадают".*|
|*2.7 Если пользователь не кликнул на чек-бокс для согласия с правилами сайта и обработки данных, то при нажатии на кнопку "Создать аккаунт" поле с чек-боксом и текстом обводится красной рамкой”*| *2.7 Если чек-бокс не был активирован, то регистрация в системе невозможна. Запрос на создание аккаунта отклоняется и чек-бокс с полем обведен в красную рамку”*|
|3. Пользователь видит модальное окно с текстом “Регистрация прошла успешно! Вы были перенаправлены на страницу авторизации” и кнопку "Ок". После нажатия кнопки "Ок" пользователь переходит на страницу авторизации.|4. Если данные введены верно, система отправляет пакет данных для сохранения в БД и открывает модальное окно с текстом “Регистрация прошла успешно! Вы были перенаправлены на страницу авторизации” и кнопкой "Ок". После нажатия на кнопку "Ок" система закрывает модальное окно и открывает страницу авторизации.|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|**Итог:** Пользователь зарегистрирован в системе|[Прототип страницы регистрации](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=343%3A430&scaling=scale-down-width)|

### Авторизация пользователя в системе

|    Пользовательский сценарий     |    Функциональный сценарий    |
|----------------------------------|-------------------------------|
|Предусловие: Пользователь на главной странице|Открыта главная страница|  
|1. Пользователь нажимает на кнопку личного кабинета в правом верхнем углу и попадает на страницу авторизации|1. Система открывает страницу авторизации|
|*2.1 Если пользователь еще не зарегистрирован, то переходит к сценарию “Регистрация пользователя в систему”*| *Система открывает страницу авторизации, по запросу* |
|2. Пользователь вводит email и пароль, затем нажимает на кнопку "Войти"|2. Система получает e-mail и пароль и делает проверку данных|
|*2.1 Если поле "Email" не соответствует требованиям, то под полем пользователь видит ошибки: "Неверный формат email адреса", "Email может содержать только символы латинского алфавита, цифры и символ @ и точки (не более одной подряд)." "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|*2.1 Если поле "Email" не соответствует требованиям, то система выдает ошибки: "Неверный формат email адреса", "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|
|*2.2 Если поле "Пароль" не заполнено, то под полем пользователь видит ошибку: "Данное поле необходимо заполнить".*|*2.2 Если поле "Пароль" пустое, то система выдает ошибку: "Данное поле необходимо заполнить".*|
|*2.3 Если поле "Email" или "Пароль" введены неверно, то под полем пользователь видит ошибку: "Не удается войти. Неверный логин или пароль.".*|*2.3  Если поле "Email" или "Пароль" введены неверно, то система выдает ошибку: "Не удается войти. Неверный логин или пароль.".*|
|3. Пользователь успешно авторизован и видит страницу личного кабинета, раздел "Мои покупки". В разделе написан текст "Нет купленных билетов" и кнопка "Купить билет". Нажав на кнопку, пользователь перейдет в раздел "Расписание"| 4. Система входит в аккаунт пользователя. Открывает страницу личного кабинета, раздел "Мои покупки". В разделе выводит текст "Нет купленных билетов" и кнопка "Купить билет". Через кнопку "Купить билет" осуществляется переход в раздел "Расписание"|
|*3.1 Если у пользователя уже есть покупки, то он видит остортированный по дате и времени оплаты список билетов. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.*|*3.2 Если система находит у пользователя купленные билеты, сортирует их список по дате и времени оплаты. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.*|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|**Итог:** Пользователь авторизовался в системе|[Прототип страницы авторизации](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=343%3A447&scaling=scale-down-width)|

### Выход из аккаунта

|    Пользовательский сценарий     |    Функциональный сценарий    |
|----------------------------------|-------------------------------|
|Предусловие: Пользователь авторизован на сайте|Предусловие: Пользователь авторизован в системе| 
|1. Пользователь наводит курсор на кнопку личного кабинета. Появляется блок-окно для быстрого перехода в: профиль, мои покупки, избранное, мои отзывы, выход. |1. При попадании курсора в область кнопки личного кабинета, система открывает блок-окно для быстрого перехода в: профиль, мои покупки, избранное, мои отзывы, выход.|
|2. Пользователь нажимает кнопку "Выйти" и видит модальное окно с текстом "Хотите выйти?" и кнопками "Да" и "Нет"|2. Система открывает модальное окно для подтверждения выхода из системы с текстом "Хотите выйти?" и кнопками "Да" и "Нет"|
|3. Если пользователь выбирает "Да", то модальное окно закрывается и пользователь переходит на главную страницу. При наведении курсора на кнопку личного кабинета блок-окно не будет появляться. |3. Система выходит из личного кабинета пользователя, закрывает модальное окно и переходит на главную страницу. При наведении курсора на кнопку личного кабинета система не открывает блок-окно.|
|4. Если пользователь выбирает "Нет", то модальное окно закрывается и пользователь остается на прежней странице. При наведении курсора на кнопку личного кабинета блок-окно будет появляться.|3. Система не выходит из личного кабинета, закрывает модальное окно. При наведении курсора на кнопку личного кабинета система открывает блок-окно.|
|5. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|5. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|*Итог: пользователь вышел из аккаунта*|[Прототип страницы выхода из аккаунта. Надо навести на кнопку личного кабинета](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=244%3A122&scaling=scale-down-width)|

## Блок "Афиша"
### Страница блока "Афиша"

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит меню навигации, ниже информационный блок о платформе. Ниже блока о платформе располагается поиск с фильтрами.|1. Система отображает меню навигации, ниже информационный блок о платформе. Ниже блока поиск с фильтрами.|
|2. Ниже блока о платформе пользователь видит поиск с фильтрами и кнопку "Найти".|2. Система отображает поле поиска для ввода и правее, на одном уровне, кнопку "Найти".|
|3. Ниже поиска с фильтрами, пользователь видит карточки спектаклей. Карточки располагаются по N штук в строке. Количество строк не ораничено.|3. Ниже поиска с фильтрами, система отображает карточки спектаклей. Карточки располагаются по N штук в строке. Количество строк не ораничено.|
|4. Пользователь может переходить в другие разделы через меню навигации:|4. Система позволяет переходить на страницы разделов через меню навигации:|
|*- Нажимая на личный кабинет, открывается личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то открывается страница авторизации.*|*- Если пользователь авторизован, то через кнопку личного кабинета идет переход в личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то переход на страницу авторизации.*|
|*- Нажимая на кнопку "Театры города" открывается страница всех театров.*|*- Через кнопку "Театры" переход на страницу всех театров.*|
|*- Нажимая на кнопку "Афиша" ничего не происходит.*|*- Через кнопку "Афиша" нет переходов на другие страницы.*|
|*Итог: пользователь может просматривать страницу и переходить в другие разделы.*|[Прототип страницы блока "Афиша"](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=1316%3A0&scaling=scale-down-width)|


### Поиск с фильтрами

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Ниже блока о платформе пользователь видит поиск с фильтрами.|1. Система отображает ниже блока о платформе поиск с фильтрами.|
|2. Пользователь видит: поле поиска для ввода и правее кнопку "Найти". Ниже кнопку "Театр" и "Жанр". Ниже кнопки параметров цены, длительности и даты.|2. Система отображает поле поиска для ввода и правее кнопку "Найти". Ниже "Театр" и "Жанр". Ниже кнопки параметров цены, длительности и даты.|
|3. Если параметры поиска пользователем не выбраны, то, нажимая на кнопку "Найти", ничего не происходит.|3. Если параметры поиска не заданы, то система также отображает страницу. Кнопка "Найти" не активна.|
|4. Если задан хотя бы 1 параметр поиска, то после нажатия на кнопку "Найти" пользователь увидит результаты поиска (карточки спектаклей) по заданному параметру.|4. Если задан хотя бы 1 параметр поиска, то после нажатия на кнопку "Найти" система производит поиск и отображает результаты поиска (карточки спектаклей) по заданному параметру.|
|*4.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*4.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|
|*Итог: пользователь может задавать параметры поиска*|[Прототип страницы с поиском](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=1316%3A0&scaling=scale-down-width)|


### Поиск по названию, автозаполнение

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит поле поиска и кнопку "Найти" и может вводить название спектакля в поле поиска.|1. Система отображает поле поиска, кнопку "Найти" и позволяет вводить данные в поле поиска.|
|2. Когда пользователь начинает вводить название в поле поиска, то ниже появляется блок-окно с вариантами схожих запросов (max-10). |2. Система считывает введенные данные и делает поиск по названиям спектаклей. Подходящие варианты система сортирует по частоте поиска и отображает в блок-окне ниже поля поиска (max-10). В процессе ввода данных, система изменяет количество подходящих вариантов.|
|3. В процессе ввода количество схожих вариантов может меняться.|3. В процессе ввода данных, система изменяет количество подходящих вариантов.|
|*3.1 Если схожих вариантов нет или в течение поиска оно свелось к 0, то пользователь не видит блок-окно. Если количество схожих вариантов в процессе ввода увеличивается/уменьшается, то размер блок-окна тоже увеличивается/уменьшается.*|*3.1 Если совпадений нет или в течение поиска оно свелось к 0, то система не отображает блок-окно. Если количество совпадений в процессе ввода увеличивается/уменьшается, то размер блок-окна система увеличивает/уменьшает.*|
|4. Пользователь может выбирать подходящий вариант в блок-окне, нажав на него. После выбора, пользователь видит выбранный вариант в поле ввода и результаты поиска.|4. Система позволяет выбирать подходящий вариант в блок-окне, нажав на него. После выбора, система перемещает выбранный вариант в поле ввода, проводит поиск и отображает результаты.|
|5. Пользователь может сам заполнять поле ввода. После нажатия на кнопку "Найти", пользователь видит результаты поиска.|5. Система позволяет вводить данные в поле. После запроса на поиск, система проводит поиск и отображает результаты.|
|*5.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*5.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|


### Поиск по театру

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит кнопку "Театр". Нажав на нее, открывается блок-окно со списком театров. Закрыть блок-окно можно нажатием на кнопку "Театр" или на область вне кнопки.|1. Система отображает кнопку "Театр". Нажав на нее, система открывает блок-окно со списком театров. Система закрывает блок-окно после нажатия на кнопку "Театр" или на область вне кнопки.|
|2. Пользователь может выбирать один или несколько театров, нажав на название театра или на чек-бокс слева. |2. Система позволяет выбирать один или несколько театров, через нажатие на название театра или чек-бокс слева.|
|3. После выбора театра в чек-боксе появляется галочка. Справа от кнопки "Театр" появляется название театра и крестик справа, для удаление театра из выбранного.|3. После выбора театра в чек-боксе появляется галочка. Справа от кнопки "Театр" система добавляет название театра и крестик справа, для удаление театра из выбранного.|
|4. После выбора театра пользователь нажимает на кнопку "Найти" и видит результаты поиска (карточки спектаклей).|4. После выбора театра и запроса на поиск, система проводит поиск и отображает результаты.|
|*4.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*4.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|

### Поиск по жанру

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит кнопку "Жанр". Нажав на нее, открывается блок-окно со списком жанров. Закрыть блок-окно можно нажатием на кнопку "Жанр" или на область вне кнопки.|1. Система отображает кнопку "Жанр". Нажав на нее, система открывает блок-окно со списком жанров. Система закрывает блок-окно после нажатия на кнопку "Жанр" или на область вне кнопки.|
|2. Пользователь может выбирать один или несколько жанров, нажав на название жанра или на чек-бокс слева. |2. Система позволяет выбирать один или несколько жанров, через нажатие на название жанра или чек-бокс слева.|
|3. После выбора жанра в чек-боксе появляется галочка. Справа от кнопки "Жанр" появляется название Жанра и крестик справа, для удаление жанра из выбранного.|3. После выбора жанра в чек-боксе появляется галочка. Справа от кнопки "Жанр" система добавляет название жанра и крестик справа, для удаление театра из выбранного.|
|4. После выбора жанра пользователь нажимает на кнопку "Найти" и видит результаты поиска (карточки спектаклей).|4. После выбора жанра и запроса на поиск, система проводит поиск и отображает результаты.|
|*4.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*4.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|

### Поиск по цене

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит кнопку цены. Нажав на нее открывается блок-окно с кнопками: "до 500 руб.", "до 1000 руб.", "до 1500 руб.", "до 2000 руб.", "более 2000 руб.".|1. Система отображает кнопку цены. Нажав на нее, система открывает блок-окно с кнопками: "до 500 руб.", "до 1000 руб.", "до 1500 руб.", "до 2000 руб.", "более 2000 руб.".|
|2. Пользователь может выбирать одну категорию, нажав на название кнопки или на чек-бокс слева. |2. Система позволяет выбирать одну категорию, через нажатие на название кнопки или чек-бокс слева.|
|3. После выбора каетгории в чек-боксе появляется галочка. Справа от кнопки цены появляется название категории и крестик справа, для удаление выбранной категории.|3. После выбора категории в чек-боксе появляется галочка. Справа от кнопки цены система добавляет название кнопки и крестик справа, для удаление выбранной категории.|
|4. После выбора категории цены пользователь нажимает на кнопку "Найти" и видит результаты поиска (карточки спектаклей).|4. После выбора цены и запроса на поиск, система проводит поиск и отображает результаты.|
|*4.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*4.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|

### Поиск по длительности

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит кнопку цены. Нажав на нее открывается блок-окно с кнопками: "до 90 мин.", "до 120 мин.", "до 150 мин.", "до 180 мин.", "более 180 мин.".|1. Система отображает кнопку цены. Нажав на нее, система открывает блок-окно с кнопками: "до 90 мин.", "до 120 мин.", "до 150 мин.", "до 180 мин.", "более 180 мин.".|
|2. Пользователь может выбирать одну категорию, нажав на название кнопки или на чек-бокс слева. |2. Система позволяет выбирать одну категорию, через нажатие на название кнопки или чек-бокс слева.|
|3. После выбора каетгории в чек-боксе появляется галочка. Справа от кнопки цены появляется название категории и крестик справа, для удаление выбранной категории.|3. После выбора категории в чек-боксе появляется галочка. Справа от кнопки цены система добавляет название кнопки и крестик справа, для удаление выбранной категории.|
|4. После выбора категории длительности пользователь нажимает на кнопку "Найти" и видит результаты поиска (карточки спектаклей).|4. После выбора категории длительности и запроса на поиск, система проводит поиск и отображает результаты.|
|*4.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*4.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|

### Поиск по дате

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице блока "Афиша"|Предусловие: Открыта страница блока "Афиша"|
|1. Пользователь видит кнопку календаря, поле для даты и кнопку "Сброс". Нажав на календарь открывается блок-окно. Пользователь видит: кнопки для быстрого выбора - "Сегодня", "Завтра", "На этой неделе", "На следующей неделе", "В этом месяце", календарь текущего, следующего месяца и кнопки "Отмена", "Применить".|1. Система отображает кнопку календаря, поле для даты и кнопку "Сброс". Нажав на календарь система открывает блок-окно. Система отображает: кнопки для быстрого выбора - "Сегодня", "Завтра", "На этой неделе", "На следующей неделе", "В этом месяце", календарь текущего, следующего месяца и кнопки "Отмена", "Применить".|
|2. Пользователь может выбирать в календаре месяц и год. Отменять и применять выбор.|2. Система позволяет выбирать в календаре месяц и год, отменять и применять выбранные даты.|
|3. При первом клике на дату она выделяется другим цветом. При смещении курсора, другие даты тоже выдеряются другим цветом. После выбора второй даты, выделяется промежуток дат.|3. При первом клике на дату система выделяет ее другим цветом. При смещении курсора, другие даты автоматически выдеряются другим цветом. После выбора второй даты, система выделяет другим цветом промежуток дат.|
|4. Если пользователь кликает на одну дату 2 раза, то выделяется одна дата и поиск проходит по этой дате.|4. Если по одной дате кликают 2 раза, то система определяет одну дату для поиска.|
|5. После выбора даты пользователь нажимает кнопку применить. Блок-окно закрывает. Выбранная даты отображается в поле.|5. После нажатия на кнопку применить система закрывает блок-окно и отображает дату в поле.|
|*5.1 Если после выбора даты пользователь нажимает кнопку "Сбросить", то выбранная дата удаляется с поля.*|*5. После нажатия на кнопку "Сбросить" система сбрасывает выбор даты и не отображает дату в поле.*|
|6. После выбора даты пользователь нажимает на кнопку "Найти" и видит результаты поиска (карточки спектаклей).|6. После выбора длительности и запроса на поиск, система проводит поиск и отображает результаты.|
|*6.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*6.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|







### Поиск (пусть пока тут повисит)

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице "Афиша"|Предусловие: Открыта страница "Афиша"|
|1. Пользователь видит меню навигации, ниже информационный блок о платформе. Ниже блока о платформе располагается поиск с фильтрами.|1. Система отображает меню навигации, ниже информационный блок о платформе. Ниже блока поиск с фильтрами.|
|**Пользователь может искать спектакли по одному или нескольким параметрам:**|**Система может делать поиск по одному или нескольким параметрам:**|
|2. Если параметры поиска пользователем не выбраны, то, нажимая на кнопку "Найти", ничего не происходит.|2. Если параметры поиска не заданы, то система также отображает страницу. Кнопка "Найти" не активна.|
|3. Если пользователь начинает вводить название в поле поиска, то ниже появляется блок-окно с вариантами схожих запросов (max-10). В процессе ввода количество схожих вариантов может меняться. Если схожих вариантов нет, то пользователь не видит блок-окно. Пользователь может выбрать схожий вариант кликнув на него. Пользователь увидит результаты поиска по выбранному варианту.|3. Система считывает введенные данные и делает поиск по названиям спектаклей. Подходящие варианты система отображает в блок-окне ниже поля поиска (max-10). В процессе ввода данных, система изменяет количество подходящих вариантов. Если совпадений не найдено, то блок-окно не отображается.|
|*3.1 Пользователь может ввести только название спектакля и нажать кнопку "Найти". В результатах он увидит все совпадения за выбранную неделю. Если пользователь не заполняет поле название, то в результатах видит спектакли найденные по дргим параметрам.*|*3.1 Система может проводить поиск только по названию спекталя. В результатах система отобразит все совпадения за выбранную неделю. Если поле названия пустое, то система выполняет поиск по другим параметрам.*|
|4. Если пользователь выбирает 1 или более театров, то в результатах поиска видит результаты по выбранным театрам. Если пользователь не выбирает театр, то в результатах поиска видит результаты по всем театрам.|4. Если 1 или более театров выбраны, то система проводит поиск и отображает результаты по выбранным театрам. Если театр не выбран, то система проводит поиск и отображает результаты по другим параметрам и всем театрам.|
|5. Если пользователь выбирает 1 или более жанров, то в результатах поиска видит результаты по выбранным жанрам. Если пользователь не выбирает жанр, то в результатах поиска видит результаты по другим параметрам и всем жанрам.|5. Если 1 или более жанров выбраны, то система проводит поиск и отображает результаты по выбранным жанрам. Если жанр не выбран, то система проводит поиск и отображает результаты по другим параметрам и всем жанрам.|
|6 . Если пользователь выбирает промежуток цены для поиска, то в результатах видит спектакли в выбранном промежутке. Если пользователь не изменил ценовой диапазон, по поиск проходит по другим параметрам и всем доступным ценам.|6. Если выбран промежуток цен, то система проводит поиск и отображает результаты по выбранному промежутку. Если ценовой диапазон не выбран, то система проводит поиск и отображает результаты по другим параметрам и всем доступным ценам.|
|7 . Если пользователь выбирает промежуток длительности для поиска, то в результатах видит спектакли в выбранном промежутке. Если пользователь не изменил диапазон длительности, по поиск проходит по другим параметрам и всем доступным спектаклям.|7. Если выбран промежуток длительности, то система проводит поиск и отображает результаты по выбранному промежутку. Если диапазон длительности не выбран, то система проводит поиск и отображает результаты по другим параметрам и всем доступным спектаклям.|
|8. Если пользователь выбирает промежуток дат для поиска, то в результатах видит спектакли в выбранном промежутке. Если выбрана одна дата, то в результатах видит спектакли в определенную дату. Если пользователь не выбрал дату, по поиск проходит по другим параметрам и всем доступным датам.|8. Если выбран промежуток дат, то система проводит поиск и отображает результаты по выбранному промежутку. Если выбрана одна дата, то система проводит поиск и отображает результаты по определенной дате. Если даты не выбраны, то система проводит поиск и отображает результаты по другим параметрам и всем доступным датам.|
|9. Пользователь видит результаты поиска (карточки спектаклей) спектаклей по выбранной неделе. Пользователь может переходить к результатам поиска на другую неделю.|9. Система отображает результаты поиска (карточки спектаклей) по выбранной неделе. Система позволяет переходить к результатам поиска на другую неделю.|
|*9.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*9.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|
|*Итог: пользователь может задавать параметры поиска и искать спектакли*|[Прототип страницы с поиском](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=1316%3A0&scaling=scale-down-width)|




## Блок "Личный кабинет"

### Просмотр избранного

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь в личном кабинете|Предусловие: Открыта страница личного кабинета|
|1. Пользователь переходит в раздел "Избранное"|1. Система проверяет наличие избранных спектаклей у пользователя и открывает страницу "Избранное"|
|2. Пользователь видит карточки спектаклей с индикатором "избранное" в правом верхнем углу. В карточке отражено: фото, название спектакля, театр, год, художник-постановщик, режиссер-постановщик, продолжительность.|2. Система отображает спектакли, привязанные к id пользователя с индикатором "Избранное". В карточке отражено: фото, количество звезд, "Оценка зрителей" в формате 0.00, общее количество голосов, название спектакля, кнопка "Описание" и "Отзывы", театр, год, художник-постановщик, режиссер-постановщик, продолжительность.|
|*2.1 Если избранных спектаклей нет, то есть кнопка "Добавить в избранное". При нажатии пользователь переходит в раздел "Расписание"*|*2.1 Если система не находит избранные спектакли, то открывает страницу с кнопкой, которая позволяет переходит на страницу "Расписание"*|
|3. Пользователь может удалять спектакли из избранного. Нажав на индикатор "избранное", появляется модальное окно с текстом "Вы действительно хотите удалить "Спектакль_1" из избранного?" и кнопками "Да", "Нет".|3. Если пользователь хочет изменить индикатор на "не избранное", то система открывает модальное окно с текстом "Вы действительно хотите удалить "Спектакль_1" из избранного?" и кнопками "Да", "Нет".|
|*3.1 Если пользователь подтверждает удаление, то индикатор меняет цвет и карточка исчезает из раздела "Избранное".*|*3.1 Если удаление подтверждено, то система меняет цвет индикатора, убирает карточку из раздела "Избранное" и удаляет данные из БД*|
|*3.2 Если пользователь не подтверждает удаление, то индикатор не меняет цвет и карточка остается в разделе "Избранное"*|*3.2 Если удаление не подтверждено, то система не меняет цвет индикатора, карточку остается в разделе "Избранное"*|
|4. Пользователь через карточку спектакля может переходить на страницу описания спектакля.|4. Система отображает карточки спектаклей с гиперссылкой на страницу описания спектакля.|
|5. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|5. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|*Итог: пользователь может добавлять, удалять карточки спектаклей из раздела "Избранное". Может быстро переходить на страницу описания спектакля.*|[Прототип страницы избранного](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=247%3A80&scaling=scale-down-width)|

### Мои покупки

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь в личном кабинете|Предусловие: Открыта страница личного кабинета|
|1. Пользователь переходит в раздел "Мои покупки"|1. Система проверяет наличие купленных билетов у пользователя и открывает страницу "Мои покупки"|
|*1.1 Если билетов нет, то в окне написан текст "Нет купленных билетов" и кнопка "Купить билет". Нажав на кнопку, пользователь перейдет в раздел "Расписание"*|*1.1 Если билетов нет, то система выводит в окне текст "Нет купленных билетов" и кнопку "Купить билеты" с гиперссылкой на раздел "Расписание"*|
|2. Пользователь видит остортированный по дате и времени оплаты список билетов. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.|2. Система автоматически сортирует билеты по дате в обратном порядке. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.|
|*2.1 Поле с кодом билета различаются по цвету. После покупки, (до спектакля) поле с кодом желтого цвета. Если спектакль прошел, то пользователь видит поле с кодом зеленым цветом.*|*2.1 Поле с кодом билета различаются по цвету. После покупки (до спектакля) система присваивает полю с кодом желтый цвет. Если спектакль прошел, то система присваивает полю с кодом зеленый цвет.*|
|3. Пользователь может переходить на страницу спектакля по клику на название|3. Система позволяет переходить на страницу спектакля через его название|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|*Итог: Пользователь видит список купленных билетов*|[Прототип страницы покупок пользователя](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=244%3A122&scaling=scale-down-width)|

## Блок "Театры"

### Страница всех театров

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице театров|Предусловие: Открыта страница театров|
|1. Пользователь видит карточки театров. В карточке отображено: фото, название, описание театра и кнопка "Подробнее". Нажав на кнопку "Подробнее", пользователь переходит на страницу театра.|1. Система отображает карточки с содержанием: фото, название, описание театра и кнопка "Подробнее". Система позволяет переходить на страницу театра, нажав на кнопку "Подробнее".|
|*1.1 В описании театра пользователь видит только первые N строчек. В конце последней строки ставится троеточие*|*1.1 В описании театра система отражает только первые N строк. В конце последней строки ставится троеточие*|
|2. Пользователь может переходить в другие разделы через меню навигации:|2. Система позволяет переходить на страницы разделов через меню навигации:|
|*- Нажимая на логотип платформы, открывается главная страница.*|*- Через логитип платформы идет переход на главную страницу.*|
|*- Нажимая на кнопку поиска, открывается главная страница и опускается к блоку поиска.*|*- При нажатии на поиск система открывает главную страницу и опускает страницу к полю поиска.*|
|*- Нажимая на личный кабинет, открывается личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то открывается страница авторизации.*|*- Если пользователь авторизован, то через кнопку личного кабинета идет переход в личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то переход на страницу авторизации.*|
|*- Нажимая на кнопку "Театры" ничего не происходит.*|*- Через кнопку "Театры" нет переходов на другие страницы.*|
|*Итог: пользователь может выбрать театр и перейти на его страницу*|[Прототип страницы театров](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=736%3A261&scaling=scale-down-width)|

### Страница театра, о театре

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице театра|Предусловие: Открыта страница театра|
|1. Пользователь видит название театра, ниже (на одном уровне) разделы: о театре, афиша, контакты. Пользователь видит, что выбран раздел "О театре", ниже информацию о театре и одно фото театра.|1. При переходе на страницу театра система по умолчанию открывает раздел "О театре" и отображает название театра и разделы: о театре, афиша, контакты. Ниже отображается информация о театре и одно фото.|
|2. Пользователь может переходить в разделы театра "Афиша", "Контакты".|2. Система позволяет переходить через кнопки "Афиша", "Контакты" в эти разделы.|
|3. Пользователь может переходить в другие разделы через меню навигации:|3. Система позволяет переходить на страницы разделов через меню навигации:|
|*- Нажимая на логотип платформы, открывается главная страница.*|*- Через логитип платформы идет переход на главную страницу.*|
|*- Нажимая на кнопку поиска, открывается главная страница и опускается к блоку поиска.*|*- При нажатии на поиск система открывает главную страницу и опускает страницу к полю поиска.*|
|*- Нажимая на личный кабинет, открывается личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то открывается страница авторизации.*|*- Если пользователь авторизован, то через кнопку личного кабинета идет переход в личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то переход на страницу авторизации.*|
|*- Нажимая на кнопку "Театры", открывается страница всех театров.*|*- Через кнопку "Театры" переход на страницу всех театров.*|
|*Итог: пользователь может изучить информацию о театре и перейти в другие разделы театра*|[Прототип страницы театра и "О театре"](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=876%3A1108&scaling=scale-down-width)|

### Страница театра, Афиша

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице театра|Предусловие: Открыта страница театра|
|1. Пользователь нажимает на раздел "Афиша" и переходит на страницу раздела.|1. Система открывает страницу раздела театра "Афиша".|
|2. Пользователь видит заголовок "Сейчас идет" и карточки событий. Карточки располагаются по N штук в строке. Количество строк не ораничено|2. Система отображает заголовок "Сейчас идет" и карточки событий, по N штук в строке. Количество строк не ораничено.|
|3. В карточке пользователь видит: фото, название, индикатор "избранное", дату и время, театр и кнопку "Купить билеты". Пользователь переходит на страницу выбора даты и мест в зале, нажав на кнопку "Купить билеты"|3. В карточке события система отображает: фото, название, индикатор "избранное", дату и время, театр и кнопку "Купить билеты". Система позволяет переходить на страницу выбора даты и мест в зале через кнопку "Купить билеты".|
|4. Пользователь может добавлять спектакль в избранное, нажав на индикатор "Избранное". После нажатия на индикатор, его цвет меняется, а спектакль добавляется в раздел "Избранное" в личном кабинете.|4. Система меняет цвет индикатора и добавляет спектакль в раздел "Избранное" в личном кабинете.|
|*4.1 Если пользователь не авторизован, то, после нажатия на индикатор "Избранное", пользователь видит модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|*4.1 Если пользователь не авторизован, то, система не добавляет спектакль в избранное. Открывает модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|
|5. Пользователь может переходить в разделы театра "О театре", "Контакты".|5. Система позволяет через кнопки "О театре", "Контакты" переходить в эти разделы театра.|
|6. Пользователь может переходить в другие разделы через меню навигации:|6. Система позволяет переходить на страницы разделов через меню навигации:|
|*- Нажимая на логотип платформы, открывается главная страница.*|*- Через логитип платформы идет переход на главную страницу.*|
|*- Нажимая на кнопку поиска, открывается главная страница и опускается к блоку поиска.*|*- При нажатии на поиск система открывает главную страницу и опускает страницу к полю поиска.*|
|*- Нажимая на личный кабинет, открывается личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то открывается страница авторизации.*|*- Если пользователь авторизован, то через кнопку личного кабинета идет переход в личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то переход на страницу авторизации.*|
|*- Нажимая на кнопку "Театры", открывается страница всех театров.*|*- Через кнопку "Театры" переход на страницу всех театров.*|
|*Итог: пользователь может ознакомиться с событиями театра, добавить спектакль в избранное и перейти к покупке билета*|[Прототип страницы "Афиша"](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=876%3A1662&scaling=scale-down-width)|


### Страница театра, Контакты

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице театра|Предусловие: Открыта страница театра|
|1. Пользователь нажимает на раздел "Контакты" и переходит в этот раздел|1. Система открывает страницу раздела театра "Контакты"|
|2. Пользователь видит заголовок "Контакты", контакты театра и гугл карту, которая отображает расположение театра. Переходов на другие страницы нет.|2. Система отображает заголовок "Контакты", контакты театра и гугл карту, которая отображает расположение театра. Переходов на другие страницы нет.|
|*2.1 Пользователь может увеличивать и уменьшать карту, передвигаться по ней и открывать в полноэкранном режиме.*|*2.1 Система позволяет увеличивать и уменьшать карту, передвигаться по ней и открывать в полноэкранном режиме.*|
|3. Пользователь может переходить в разделы театра "О театре", "Афиша".|3. Система позволяет переходить через кнопки "О театре", "Афиша"в эти разделы театра.|
|4. Пользователь может переходить в другие разделы через меню навигации:|4. Система позволяет переходить на страницы разделов через меню навигации:|
|*- Нажимая на логотип платформы, открывается главная страница.*|*- Через логитип платформы идет переход на главную страницу.*|
|*- Нажимая на кнопку поиска, открывается главная страница и опускается к блоку поиска.*|*- При нажатии на поиск система открывает главную страницу и опускает страницу к полю поиска.*|
|*- Нажимая на личный кабинет, открывается личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то открывается страница авторизации.*|*- Если пользователь авторизован, то через кнопку личного кабинета идет переход в личный кабинет, раздел "Мои покупки". Если пользователь не авторизован, то переход на страницу авторизации.*|
|*- Нажимая на кнопку "Театры", открывается страница всех театров.*|*- Через кнопку "Театры" переход на страницу всех театров.*|
|*Итог: пользователь может узнать контакты и расположение театра*|[Прототип страницы "Контакты"](https://www.figma.com/proto/1Y7W6gr215v1CP50WXuLM0/Tomsk-design-ver.2?node-id=876%3A2157&scaling=scale-down-width)|





### Страница блока "Расписание"

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице расписания|Предусловие: Открыта страница расписания|
|1. Пользователь видит заголовок "Расписание", кнопки: "Текущая неделя", "Следующая неделя"; функцию поиска с фильтрацией и список карточек театров. Нажимая на кнопки: "Текущая неделя", "Следующая неделя" пользователь будет переходить на страницу с расписанием на выбранную неделю.|1. Система отображает заголовок "Расписание", кнопки: "Текущая неделя", "Следующая неделя"; функцию поиска с фильтрацией и список карточек театров. Через кнопки: "Текущая неделя", "Следующая неделя" система позволяет переходить на страницу с расписанием на выбранную неделю.|
|2. Карточки сортируются по дате и времени (по убыванию). Карточки располагаются по N штук в строке. Количество строк не ораничено|2. Система сортирует карточки по дате и времени (по убыванию). Система отображает список карточек событий, по N штук в строке. Количество строк не ораничено.|
|3. В карточке пользователь видит: фото, индикатор "избранное", название,"Оценка зрителей" в формате 0.00, общее количество отзывов, количество звезд и кнопка "Купить билеты". Пользователь переходит на страницу выбора даты и мест в зале, нажав на кнопку "Купить билеты"|3. В карточке спектакля система отображает: фото, индикатор "избранное", название, "Оценка зрителей" в формате 0.00, общее количество отзывов, количество звезд и кнопка "Купить билеты". Система позволяет переходить на страницу выбора даты и мест в зале через кнопку "Купить билеты".|
|4. Пользователь может добавлять спектакль в избранное, нажав на индикатор "Избранное". После нажатия на индикатор, его цвет меняется, а спектакль добавляется в раздел "Избранное" в личном кабинете.|4. Система добавляет спектакль в раздел "Избранное" в личном кабинете и меняет цвет индикатора.|
|*4.1 Если пользователь не авторизован, то, после нажатия на индикатор "Избранное", пользователь видит модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|*4.1 Если пользователь не авторизован, то, система не добавляет спектакль в избранное. Открывает модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|
|5. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, страница опускается к блоку поиска.|5. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система опускает страницу к полю поиска.|
|*Итог: пользователь может просматривать страницу "Расписание"*|[Прототип страницы расписание](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=601%3A14&scaling=scale-down-width)|

### Поиск с фильтрацией

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице расписания|Предусловие: Открыта страница расписания|
|1. Пользователь видит заголовок "Расписание", кнопки: "Текущая неделя", "Следующая неделя"; поле для ввода названия, кнопка для выбора театра, кнопку календаря для выбора даты, кнопка "Найти" и список карточек театров. Нажимая на кнопки: "Текущая неделя", "Следующая неделя" пользователь будет переходить на страницу с расписанием на выбранную неделю.|1. Система отображает заголовок "Расписание", кнопки: "Текущая неделя", "Следующая неделя"; поле для ввода названия, кнопка для выбора театра, кнопку календаря для выбора даты, кнопка "Найти" и список карточек театров. Через кнопки: "Текущая неделя", "Следующая неделя" система позволяет переходить на страницу с расписанием на выбранную неделю. Система позволяет вводить в поле поиска данные, выбирать театр и дату.|
|2. Пользователь вводит данные, выбирает театр, дату и нажимает кнопку поиска. Пользователь может производить поиск как по всем фильтрам, так и отдельно по каждому.|2. Система считывает введенные данные и делает поиск в БД. Система можем производить поиск, как по всем параметрам, так и отдельно по одному.|
|*2.1 Пользователь может ввести только название спектакля и нажать кнопку "Найти". В результатах он увидит все совпадения за выбранную неделю. Если пользователь не заполняет поле название, то в результатах видит спектакли найденные по все параметрам.*|*2.1 Система может проводить поиск только по названию спекталя. В результатах система отобразит все совпадения за выбранную неделю. Если поле названия пустое, то система выполняет поиск по другим фильтрам.*|
|*2.2 При нажании на кнопку "Выберите театр" открывается блок-окно со списком тетров (первая кнопка в модальном окне "Все"). Если пользователь не выбирает театр, то в результатах поиска видит результаты по всем театрам*|*2.2 При нажании на кнопку "Выберите театр" система открывает блок-окно со списком тетров (первая кнопка в модальном окне "Все"). Если театр не выбран, то по умолчанию поиск проходит по всем театрам*|
|*2.3 При нажании на календарь открывается блок-окно с календарем текущего и возможностью выбора месяца. Если пользователь не выбирает дату, то в результатах видит результаты по всем датам.*|*2.3 При нажании на календарь система открывает блок-окно с календарем на текущий  и возможностью выбора другого месяц. Если дата не выбрана, то по умолчанию поиск проходит по всем датам.*|
|*2.4 Если пользователь не заполнил поле поиска, не выбрал театр и дату, но нажал на кнопку "Найти". В результатах он увидит все спектакли на выбранную неделю.*|*2.4 Если поле ввода, выбора театра и даты пусты, то система отображает в результатах все спектакли на выбранную неделю.*|
|3. Пользователь видит результаты поиска (карточки спектаклей) спектаклей по выбранной неделе. Пользователь может переходить к результатам поиска на другую неделю.|3. Система отображает результаты поиска (карточки спектаклей) по выбранной неделе. Система позволяет переходить к результатам поиска на другую неделю.|
|*3.1 Если поиск не дал результатов, то пользователь видит текст "Поиск не дал результатов".*|*3.1 Если поиск не дал результатов, то система отображает текст "Поиск не дал результатов".*|
|*Итог: пользователь может искать спектакли по названию, дате и театру*|[Прототип страницы расписание](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=601%3A14&scaling=scale-down-width)|

### Страница выбора даты, мест и оплаты

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице расписания|Предусловие: Открыта страница расписания|
|1. Пользователь видит отсортированный по дате и времени список карточек спектаклей, в которых есть кнопка "Купить билеты". Пользователь нажимает кнопку "Купить билет". |1. Система сортирует карточки по дате и времени. Система открывает страницу для выбора даты, мест и оплаты.|
|2. Пользователь видит блок информации о спектакле: фото, название, индикатор "избранное", кнопка "Описание" и "Отзывы", название театра, год, режиссер-постановщик, художник-постановщик, актеры, продолжительность, "Оценка зрителей" в формате 0.00, общее количество отзывов и количество звезд. Нажав на кнопку "Описание" пользователь переходит на страницу описания спектакля. Нажав на кнопку "Отзывы" пользователь переходит на страницу отзывов к спектаклю. Можно переходить на страницу актера/режиссера/художника, нажав на Имя и Фамилию.|2. Система отображает блок информации о спектакле: фото, название, индикатор "избранное", кнопка "Описание" и "Отзывы", название театра, год, режиссер-постановщик, художник-постановщик, актеры, продолжительность, "Оценка зрителей" в формате 0.00, общее количество отзывов и количество звезд. Через кнопку "Описание" возможен переход на страницу описания спектакля. Через кнопку "Отзывы" возможен переход на страницу отзывов к спектаклю. Система позволяет переходить на страницу актера/режиссера/художника через Имя и Фамилию.|
|*2.1 Пользователь может просматривать фото. Пользователь нажимает на фотографию и открывается модальное окно с фотографией и кнопкой для закрытия модального окна. При нажатии на кнопку закрытия, модально окно закрывается и пользователь видит страницу выбора даты, мест и оплаты.*|*2.1 Система позволяет просматривать фото через клик на него. Система открывает модальное окно с фотографией и кнопкой для закрытия модального окна. При нажатии на кнопку закрытия, система закрывает модальное окно.*|
|*2.2 Если фото в карточке нет, то при нажатии на фото ничего не происходит.*|*2.2 Если фото в карточке нет, то при нажатии на фото ничего не происходит.*|
|3. Ниже блока информации о спектакле пользователь видит: N-количество кнопок (где написано "ДД.ММ и день недели"), календарь для выбора даты, посадочная схема зала для выбора мест (в левом верхнем углу указаны "день недели, дата, время, в правом верхнем углу указано "Цена билета: XXXX рублей").|3. Ниже блока информации о спектакле система отображает: N-количество кнопок (где написано "ДД.ММ и день недели"), календарь для выбора даты, посадочная схема зала для выбора мест (в левом верхнем углу указаны "день недели, дата, время, в правом верхнем углу указано "Цена билета: XXXX рублей").|
|4. Справа от посадочной схемы пользователь видит мини-чек к оплате: название спектакля, дата и время, театр, выбранные места, способ оплаты, сумма, кнопка "Перейти к оплате" и "Очистить". Нажав на кнопку "Перейти к оплате" пользователь переходит на страницу оплаты. Нажав на кнопку "Очистить" все выбранные пользователем места сбрасываются, выбранные места и сумма становятся пустыми.|4. Справа от посадочной схемы система отображает мини-чек к оплате: название спектакля, дата и время, театр, выбранные места, способ оплаты, сумма, кнопка "Перейти к оплате" и "Очистить". Через кнопку "Перейти к оплате" система позволяет переходить на страницу оплаты. Кнопку "Очистить" все выбранные места делает свободными. В блоке мини-чека выбранные места и сумма становятся пустыми.|
|5. Пользователь может добавлять спектакль в избранное, нажав на индикатор "Избранное" в правом верхнем углу. После нажатия на индикатор, его цвет меняется, а спектакль добавляется в раздел "Избранное" в личном кабинете.|5. Система добавляет спектакль в раздел "Избранное" в личном кабинете и меняет цвет индикатора.|
|*5.1 Если пользователь не авторизован, то, после нажатия на индикатор "Избранное", пользователь видит модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|*5.1 Если пользователь не авторизован, то, система не добавляет спектакль в избранное. Открывает модальное окно с текстом "Для добавления "спектакля_1" в избранное, авторизуйтесь в системе."*|
|6. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, страница опускается к блоку поиска.|6. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система опускает страницу к полю поиска.|
|*Итог: пользователь может выбирать дату, места и переходить к подтверждению оплаты*|[Прототип выбора даты, мест и оплаты](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=241%3A209&scaling=scale-down-width)|

### Страница оплаты

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на странице расписания|Предусловие: Открыта страница расписания|
|1. Пользователь выбирает спектакль и нажимает кнопку "Купить билеты". Открывается страница выбора даты, мест и оплаты.|1. Система открывает страницу выбора даты, мест и оплаты.|
|2. Пользователь выбирает дату, места и нажимает кнопку "Оплатить". Открывается страница оплаты.|2. Система бронирует места, отображает сумму в мини-чеке. Открывает страницу оплаты.|
|3. На странице оплаты пользователь видит: номер заказа, сумму оплаты заказа, описание заказа, время до окончания сессии оплаты, поля для номера, срока действия, CVC/CVV карты. Ниже располагается чек-бокс с текстом "Сохранить карту для быстрой оплаты в дальнейшем" и кнопка "Оплата"|3. На странице оплаты система отображает: номер заказа, сумму оплаты заказа, описание заказа, время до окончания сессии оплаты, поля для номера, срока действия, CVC/CVV карты. Ниже располагается чек-бокс с текстом "Сохранить карту для быстрой оплаты в дальнейшем" и кнопка "Оплата".|
|*3.1 Если пользователь не авторизован, то на странице оплаты дополнительно он видит: **поле "Имя","Фамилия"**.*|*3.1 Если пользователь не авторизован, то на странице оплаты система дополнительно отображает: **поле "Имя","Фамилия"**.*|
|*3.2 Если пользователь не авторизован, то чек-бокс с текстом "Сохранить карту для быстрой оплаты в дальнейшем" пользователь не видит.*| *3.2 Если пользователь не авторизован, то система не отображает чек-бокс с текстом "Сохранить карту для быстрой оплаты в дальнейшем".*|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, страница опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система опускает страницу к полю поиска.|
|*Итог: пользователь может выбирать дату, места и переходить к подтверждению оплаты*|[Прототип страницы подтверждения оплаты](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=244%3A0&scaling=min-zoom)|

