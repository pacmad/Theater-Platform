# Сценарии (версия 1.3.5)

## Изменения

### Блок "Театры". раздел контакты
+ добавлены карты

### Блок "Расписание" 
+ удалена страница преддоплаты


## Блок "Регистрация и авторизация" 
### Регистрация пользователя в системе

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на главной странице|Предусловие: Открыта главная страница |  
|1. Пользователь нажимает на кнопку личного кабинета в правом верхнем углу. и попадает на страницу авторизации, где выбивает "Зарегистрироваться"|1. Система открывает страницу авторизации, затем страницу регистрации|
|*1.1 Если пользователь уже зарегистрирован, то он выбирает опцию Авторизации и переходит к сценарию “Авторизация пользователя”*| *1.1 Если пользователь уже зарегистрирован, то он выбирает опцию Авторизации и переходит к сценарию “Авторизация пользователя”*| 
|2. Пользователь заполняет поля: фамилия, имя, email, пароль, подтверждение пароля, нажимает чек-бокс для согласия с правилами сайта и обработки данных, нажимает кнопку “Создать аккаунт”| 2. Система позволяет пользователю создать аккаунт. Система получает данные: фамилия, имя, email, пароль, подтверждение пароля.|
|*2.1 Если поле "Имя" не соответствует требованиям, то под полем пользователь видит ошибки: "Имя должно состоять минимум из 2 букв", "Имя должно состоять максимум из 127 букв","Имя может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|*2.1 Если поле "Имя" не соответствует требованиям, то система выдает ошибки: "Имя должно состоять минимум из 2 букв", "Имя должно состоять максимум из 127 букв", "Имя может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|
|*2.2 Если поле "Фамилия" не соответствует требованиям, то под полем пользователь видит ошибки: "Фамилия должна состоять минимум из 2 букв", "Фамилия должна состоять максимум из 127 букв","Фамилия может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|*2.1 Если поле "Фамилия" не соответствует требованиям, то система выдает ошибки: "Фамилия должна состоять минимум из 2 букв", "Фамилия должна состоять максимум из 127 букв", "Фамилия может содержать только символы кириллицы", "Данное поле необходимо заполнить"*|
|*2.3 Если поле "Email" не соответствует требованиям, то под полем пользователь видит ошибки: "Неверный формат email адреса", "Email может содержать только символы латинского алфавита, цифры и символ @ и точки (не более одной подряд)." "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|*2.3 Если поле "Email" не соответствует требованиям, то система выдает ошибки: "Неверный формат email адреса", "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|
|*2.4 Если поле "Пароль" не соответствуют требованиям, то под полем пользователь видит ошибки: "Пароль должен состоять минимум из 8 символов", "Длина пароля не должна превышать 127 символов", "Пароль может содержать только буквы латинского алфавита, цифры и специальные символы: !@#$%^&* ", "Пароль должен содержать минимум одну букву в верхнем регистре", "Пароль должен содержать минимум одну букву в нижнем регистре", "Пароль должен содержать минимум одну цифру", "Данное поле необходимо заполнить".* |*2.4 Если поле "Пароль" не соответствуют требованиям, то система под полем выдает ошибки: "Пароль должен состоять минимум из 8 символов", "Длина пароля не должна превышать 127 символов", "Пароль может содержать только буквы латинского алфавита, цифры и специальные символы: !@#$%^&* ", "Пароль должен содержать минимум одну букву в верхнем регистре", "Пароль должен содержать минимум одну букву в нижнем регистре", "Пароль должен содержать минимум одну цифру", "Данное поле необходимо заполнить".* |
|*2.5 Если поле "Повторите пароль" не заполнено, то под полем пользователь видит ошибку: "Данное поле необходимо заполнить".*|*2.5 Если поле "Повторите пароль" не заполнено, то под полем система выводит ошибку: "Данное поле необходимо заполнить".*|
|*2.6 Если поле "Пароль" и "Повторите пароль" не совпадают, то под полем "Повторите пароль" пользователь видит ошибки: "Введенные пароли не совпадают".*|*2.6 Если поле "Пароль" и "Повторите пароль" не совпадают, то под полем "Повторите пароль" система выводит ошибки: "Введенные пароли не совпадают".*|
|*2.7 Если пользователь не кликнул на чек-бокс для согласия с правилами сайта и обработки данных, то при нажатии на кнопку "Создать аккаунт" поле с чек-боксом и текстом обводится красной рамкой”*| *2.7 Если чек-бокс не был активирован, то регистрация в системе невозможна. Запрос на создание аккаунта отклоняется и чек-бокс с полем обведен в красную рамку”*|
|3. Пользователь видит модальное окно с текстом “Регистрация прошла успешно! Вы были перенаправлены на страницу авторизации” и кнопку "Ок". После нажатия кнопки "Ок" пользователь переходит на страницу авторизации.|4. Если данные введены верно, система отправляет пакет данных для сохранения в БД и открывает модальное окно с текстом “Регистрация прошла успешно! Вы были перенаправлены на страницу авторизации” и кнопкой "Ок". После нажатия на кнопку "Ок" система закрывает модальное окно и открывает страницу авторизации.|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|**Итог:** Пользователь зарегистрирован в системе|[Прототип страницы регистрации](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=343%3A430&scaling=scale-down-width)|

### Авторизация пользователя в системе

|    Пользовательский сценарий     |    Функциональный сценарий    |
|----------------------------------|-------------------------------|
|Предусловие: Пользователь на главной странице|Открыта главная страница|  
|1. Пользователь нажимает на кнопку личного кабинета в правом верхнем углу и попадает на страницу авторизации|1. Система открывает страницу авторизации|
|*2.1 Если пользователь еще не зарегистрирован, то переходит к сценарию “Регистрация пользователя в систему”*| *Система открывает страницу авторизации, по запросу* |
|2. Пользователь вводит email и пароль, затем нажимает на кнопку "Войти"|2. Система получает e-mail и пароль и делает проверку данных|
|*2.1 Если поле "Email" не соответствует требованиям, то под полем пользователь видит ошибки: "Неверный формат email адреса", "Email может содержать только символы латинского алфавита, цифры и символ @ и точки (не более одной подряд)." "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|*2.1 Если поле "Email" не соответствует требованиям, то система выдает ошибки: "Неверный формат email адреса", "Пользователь с таким email уже зарегистрирован", "Максимальная длина email - 95 символов", "Длина логина (символы до @) должна быть не менее 6 символов", "Длина логина (символы до @) должна быть не более 30 символов", "Длина домена (символы после @) должна быть не более 64 символов", "Данное поле необходимо заполнить".*|
|*2.2 Если поле "Пароль" не заполнено, то под полем пользователь видит ошибку: "Данное поле необходимо заполнить".*|*2.2 Если поле "Пароль" пустое, то система выдает ошибку: "Данное поле необходимо заполнить".*|
|*2.3 Если поле "Email" или "Пароль" введены неверно, то под полем пользователь видит ошибку: "Не удается войти. Неверный логин или пароль.".*|*2.3  Если поле "Email" или "Пароль" введены неверно, то система выдает ошибку: "Не удается войти. Неверный логин или пароль.".*|
|3. Пользователь успешно авторизован и видит страницу личного кабинета, раздел "Мои покупки". В разделе написан текст "Нет купленных билетов" и кнопка "Купить билет". Нажав на кнопку, пользователь перейдет в раздел "Расписание"| 4. Система входит в аккаунт пользователя. Открывает страницу личного кабинета, раздел "Мои покупки". В разделе выводит текст "Нет купленных билетов" и кнопка "Купить билет". Через кнопку "Купить билет" осуществляется переход в раздел "Расписание"|
|*3.1 Если у пользователя уже есть покупки, то он видит остортированный по дате и времени оплаты список билетов. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.*|*3.2 Если система находит у пользователя купленные билеты, сортирует их список по дате и времени оплаты. В списке указаны: название спектакля, театр, дата и время, сумма оплаты и код для получения билета в кассе.*|
|4. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|4. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|**Итог:** Пользователь авторизовался в системе|[Прототип страницы авторизации](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=343%3A447&scaling=scale-down-width)|

### Выход из аккаунта

|    Пользовательский сценарий     |    Функциональный сценарий    |
|----------------------------------|-------------------------------|
|Предусловие: Пользователь авторизован на сайте|Предусловие: Пользователь авторизован в системе| 
|1. Пользователь наводит курсор на кнопку личного кабинета. Появляется блок-окно для быстрого перехода в: профиль, мои покупки, избранное, мои отзывы, выход. |1. При попадании курсора в область кнопки личного кабинета, система открывает блок-окно для быстрого перехода в: профиль, мои покупки, избранное, мои отзывы, выход.|
|2. Пользователь нажимает кнопку "Выйти" и видит модальное окно с текстом "Хотите выйти?" и кнопками "Да" и "Нет"|2. Система открывает модальное окно для подтверждения выхода из системы с текстом "Хотите выйти?" и кнопками "Да" и "Нет"|
|3. Если пользователь выбирает "Да", то модальное окно закрывается и пользователь переходит на главную страницу. При наведении курсора на кнопку личного кабинета блок-окно не будет появляться. |3. Система выходит из личного кабинета пользователя, закрывает модальное окно и переходит на главную страницу. При наведении курсора на кнопку личного кабинета система не открывает блок-окно.|
|4. Если пользователь выбирает "Нет", то модальное окно закрывается и пользователь остается на прежней странице. При наведении курсора на кнопку личного кабинета блок-окно будет появляться.|3. Система не выходит из личного кабинета, закрывает модальное окно. При наведении курсора на кнопку личного кабинета система открывает блок-окно.|
|5. Пользователь может переходить в разделы, кликая по ним в меню навигации. Нажимая на логотип платформы, открывается главная страница. Нажимая на кнопку поиска, открывается страница блока "Расписание" и опускается к блоку поиска.|5. Система позволяет переходить на страницы разделов через меню навигации. Через логитип платформы идет переход на главную страницу. При нажатии на поиск система открывает страницу раздела "Расписание" и опускает страницу к полю поиска.|
|*Итог: пользователь вышел из аккаунта*|[Прототип страницы выхода из аккаунта. Надо навести на кнопку личного кабинета](https://www.figma.com/proto/n63ePP2OoWwd6LMuziovJ2/Prototype-Tomsk-ver.3?node-id=244%3A122&scaling=scale-down-width)|

## Блок "Главная страница"

|    Пользовательский сценарий                    |    Функциональный сценарий    |
|-------------------------------------------------|-------------------------------|
|Предусловие: Пользователь на главной странице|Предусловие: Открыта главная страница|
